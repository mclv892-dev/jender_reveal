<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gender Reveal</title>

<!-- ★ Poppins 追加 -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet" />

<style>
/* 全体共通 */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  text-align: center;
  margin: 0;
  padding: 0;
  background: white;
}

/* 画面全体に風船 */
#balloon-container {
  position: fixed;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  overflow: hidden;
  z-index: 5;
}

.balloon {
  position: absolute;
  width: 30px;
  height: 40px;
  border-radius: 50%;
  opacity: 0.9;
}

/* 中央エリア PC版固定サイズ */
.container {
  margin-top: 70px;
  position: relative;
  z-index: 10;
  padding: 0 20px;
  width: 250px;
  margin-left: auto;
  margin-right: auto;
}

.image-wrapper {
  position: relative;
  width: 250px;
  height: 250px;
  margin: 30px auto 0;
  display: none;
  overflow: hidden;
}

#roulette-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center center;
  border-radius: 14px;
}

#overlay-text {
  position: absolute;
  top: 2px;
  width: 100%;
  text-align: center;
  font-size: 34px;
  font-weight: 800;
  color: #FFB7D5; /* ルーレット中のGIRL色 */
  text-shadow: 0 0 10px rgba(0,0,0,0.7);
  display: none;
}

#result-text {
  margin-top: 20px;
  font-size: 50px;
  font-weight: 900;
  color: #D63384; /* 最終結果のピンク */
}

/* STARTボタン */
#start-btn {
  margin-top: 25px;
  font-size: 22px;
  padding: 14px 42px;
  border-radius: 40px;
  border: 2px solid black;
  background: white;
  font-weight: 700;
  cursor: pointer;
  transition: 0.2s;
  color: black;
}
#start-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0px 6px 10px rgba(0,0,0,0.15);
}
#start-btn:active {
  transform: translateY(1px);
}
#start-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ======= スマホ対応 ======= */
@media (max-width: 480px) {
  .container {
    width: 80vw;
    max-width: 280px;
    margin-top: 40px;
    margin-left: auto;
    margin-right: auto;
    padding: 0 4vw;
  }

  .image-wrapper {
    width: 100%;
    height: 250px; /* 高さ固定に戻す */
    margin: 15px auto 0;
  }

  #roulette-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  #overlay-text {
    font-size: 4.5vw;
    top: 4px;
    color: #FFB7D5; /* ルーレット中のGIRL色 */
    text-shadow: 0 0 10px rgba(0,0,0,0.7);
  }

  #result-text {
    font-size: 5vw;
    margin-top: 12px;
    color: #D63384; /* 最終結果のピンク */
  }

  #start-btn {
    font-size: 4vw;
    padding: 10px 4vw;
  }

  .balloon {
    width: 5vw;
    height: 7vw;
  }
}
</style>
</head>

<body>

<div id="balloon-container"></div>

<div class="container">
  <h1 id="title">BOY or GIRL ?</h1>

  <div class="image-wrapper" id="image-area">
    <img id="roulette-img" src="boy.jpg" alt="ルーレット画像" />
    <div id="overlay-text">BOY</div>
  </div>

  <div id="result-text"></div>

  <button id="start-btn" onclick="startRoulette()">START</button>
</div>

<script>
let images = ["boy.jpg", "girl.jpg"];
let labels = ["BOY", "GIRL"];
let rouletteTimer = null;
let girlSwapTimer = null;

/* ルーレット開始 */
function startRoulette() {
  document.getElementById("start-btn").disabled = true;

  document.getElementById("result-text").innerText = "";
  document.body.style.background = "white";

  document.getElementById("image-area").style.display = "block";
  document.getElementById("overlay-text").style.display = "block";
  document.getElementById("roulette-img").style.display = "block";

  if (girlSwapTimer) clearInterval(girlSwapTimer);

  rouletteTimer = setInterval(() => {
    let idx = Math.floor(Math.random() * 2);

    document.getElementById("roulette-img").src = images[idx];
    document.getElementById("overlay-text").innerText = labels[idx];

    document.getElementById("overlay-text").style.color =
      labels[idx] === "BOY" ? "#8EC6FF" : "#FFB7D5";
  }, 180);

  setTimeout(stopRoulette, 7500);
}

/* ルーレット停止 */
function stopRoulette() {
  clearInterval(rouletteTimer);

  document.getElementById("overlay-text").style.display = "none";
  document.getElementById("roulette-img").style.display = "none";

  setTimeout(() => {
    const rouletteImg = document.getElementById("roulette-img");
    const resultText = document.getElementById("result-text");

    rouletteImg.style.display = "block";
    rouletteImg.src = "girl.jpg";

    resultText.innerText = "GIRL";
    // ここで色は濃いピンクに
    resultText.style.color = "#D63384";
    resultText.style.textShadow = "";

    document.body.style.background = "#FFE4F0";

    balloonStart();

    setTimeout(() => {
      startGirlSwap();
    }, 2000);

    document.getElementById("start-btn").disabled = false;
  }, 1000);
}

/* GIRL画像 3枚交互アニメ */
function startGirlSwap() {
  let idx = 0;
  const girlImages = ["girl.jpg", "taiga.jpg", "minori.jpg"];

  girlSwapTimer = setInterval(() => {
    idx = (idx + 1) % girlImages.length;
    document.getElementById("roulette-img").src = girlImages[idx];
  }, 600);
}

/* 風船アニメ */
function balloonStart() {
  const container = document.getElementById("balloon-container");
  container.innerHTML = "";

  const colors = ["pink", "skyblue", "gold", "violet", "lightgreen", "tomato"];

  for (let i = 0; i < 25; i++) {
    let balloon = document.createElement("div");
    balloon.classList.add("balloon");
    balloon.style.background = colors[Math.floor(Math.random() * colors.length)];

    balloon.style.left = Math.random() * 100 + "vw";
    balloon.style.top = (100 + Math.random() * 20) + "vh";

    balloon.dataset.sway = (Math.random() * 2 - 1).toFixed(2);

    container.appendChild(balloon);
  }

  animateBalloons();
}

function animateBalloons() {
  const balloons = document.querySelectorAll(".balloon");

  balloons.forEach(b => {
    let top = parseFloat(b.style.top);
    let left = parseFloat(b.style.left);
    let sway = parseFloat(b.dataset.sway);

    b.style.top = (top - 0.6) + "vh";
    b.style.left = (left + sway * 0.3) + "vw";

    if (top < -10) b.style.top = "110vh";
  });

  requestAnimationFrame(animateBalloons);
}
</script>

</body>
</html>
